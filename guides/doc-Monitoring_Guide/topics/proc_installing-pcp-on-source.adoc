[id='installing-pcp-on-source_{context}']
= Installing PCP on {Project} Server

This procedure describes how to install the PCP packages on monitored server.

.Prerequisites

* Ensure that the base system on which {ProjectServer} is running latest version of Red{nbsp}Hat Enterprise Linux 7. The minimum supported version for the PCP packages is PCP version 4.1.

.Procedure

. On the {Project} Server, enable the Red{nbsp}Hat Enterprise Linux `optional` repository:
+
----
# subscription-manager repos --enable rhel-7-server-optional-rpms
----

. Install the PCP packages:
+
[options="nowrap" subs="verbatim,quotes,attributes"]
----
# {foreman-maintain} packages install pcp \
  pcp-pmda-postgresql \
  pcp-pmda-prometheus \
  pcp-doc pcp-system-tools
----
+
. By default, the _pmcd_ service listens only on localhost interfaces. Edit the file _/etc/sysconfig/pmcd_ and change _PMCD_LOCAL_ variable to 0:
+
----
PMCD_LOCAL=0
----
+
. Allow monitoring server to connect to PCP daemon:
+
----
# firewall-cmd --add-service=pmcd
# firewall-cmd --add-service=pmcd --permanent
----

. Enable and start the Performance Metrics Collector daemon, and the Performance Metrics Logger daemon:
+
----
# systemctl enable --now pmcd
----

TODO configure Prometheus to do longer timeout.